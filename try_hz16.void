{   v_import("level-00");
    v_import("level-01");
    v_import("level-02");
}

{   v_enable_level_01();
    v_enable_level_02();
}

//---------------------------------------------------------------------
printf: (*const char, ...) ~> int;


//---------------------------------------------------------------------
T = struct { a: int(53); b: int(5); c: float(64); };


//---------------------------------------------------------------------
{   v_debug_print_module(2);
    voidc_verify_jit_module_optimized(true);
}


//---------------------------------------------------------------------
foo: () ~> T  =  { -1, -2, -3 };

//---------------------------------------------------------------------
bar: (t: T) ~> T
{
    r: &T := t;

    r.a -= 3;
    r.b -= 3;
    r.c -= 3;

    v_return(r);
}

//---------------------------------------------------------------------
test: () ~> void
{
    u = foo();

    printf("foo: %ld, %d, %g\n", (u.a: long), (u.b: int), u.c);

    v = bar(u);

    printf("bar: %ld, %d, %g\n", (v.a: long), (v.b: int), v.c);
}


//---------------------------------------------------------------------
{
    test();
}


